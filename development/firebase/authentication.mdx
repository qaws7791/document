# firebase auth


## ì´ë©”ì¼ ê¸°ë°˜ íšŒì›ê°€ìž…

íšŒì›ê°€ìž… ì‹œ ìž…ë ¥ ì •ë³´

- ë‹‰ë„¤ìž„
- ì´ë©”ì¼
- ë¹„ë°€ë²ˆí˜¸

1. `createUserWithEmailAndPassword()`í•¨ìˆ˜ ë¥¼ í†µí•´ ì´ë©”ì¼ ì‚¬ìš©ìž ìƒì„±
2. `updateProfile()` í•¨ìˆ˜ë¥¼ í†µí•´  `displayName` ì—…ë°ì´íŠ¸
3. `sendEmailVerification()` í•¨ìˆ˜ë¥¼ í†µí•´ ì´ë©”ì¼ í™•ì¸ì„ ìœ„í•œ ë©”ì¼ ì „ì†¡

```typescript
interface SignupDto {
  email: string;
  password: string;
  username: string;
}
```

```typescript
export const signupWithEmail = async ({
  email,
  password,
  username,
}: SignupDto) => {
  if (!email || !password || !username) return;

  try {
    const userCredential = await createUserWithEmailAndPassword(
      auth,
      email,
      password,
    );

    await Promise.all([
      sendEmailVerification(userCredential.user),
      updateProfile(userCredential.user, {
        displayName: username,
      }),
    ])

    return { success: true, user: userCredential.user };
  } catch (error) {
    console.log(error);
    return { success: false, error };
  }
};
```


ðŸ”´ ì´ë©”ì¼ ì‚¬ìš©ìžë¥¼ ìƒì„±í•œ ìˆœê°„ë¶€í„° ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•˜ë‹¤

ðŸŸ  ì´ë©”ì¼ ì¸ì¦ì´ ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ëŠ”  `user[emailVerified]`  Boolean ì†ì„±ì„ í†µí•´ í™•ì¸ í•  ìˆ˜ ìžˆë‹¤

![image-20240120201457329](assets/image-20240120201457329.png)


## íšŒì›ê°€ìž… ì‹œ dbì— ìœ ì € ì •ë³´ ì €ìž¥


### ì´ë©”ì¼ íšŒì›ê°€ìž…

ê°€ìž…í•˜ëŠ” í•¨ìˆ˜ ë‚´ì—ì„œ `createUserWithEmailAndPassword()` í›„ì— `createUser()` í˜¸ì¶œ

```javascript
const signUpWithEmail = async ({ email, password, username }: SignUpDto) => {
  if (!email || !password || !username) return;

  try {
    const userCredential = await createUserWithEmailAndPassword(
      auth,
      email,
      password,
    );

    await UserService.createUser({
      ...
    });
 ...
  }
};
```


### ì†Œì…œ ë¡œê·¸ì¸

ì†Œì…œ ë¡œê·¸ì¸ì—ëŠ” íšŒì›ê°€ìž…ì„ í•˜ëŠ” í•¨ìˆ˜ê°€ ì—†ë‹¤

`signInWithPopup()` í›„ì— ë°˜í™˜ë˜ëŠ” `userCredential`ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ìœ ì €ì¸ì§€ í™•ì¸


```javascript
const signInWithGoogle = async () => {
  try {
    const userCredential = await signInWithPopup(auth, googleProvider);

    const additionalUserInfo = getAdditionalUserInfo(userCredential);

    if (additionalUserInfo?.isNewUser) {
      await UserService.createUser({
          ...
      });
    }
 ...
};
```

