---
title: "7. 파일 권한과 소유권"
---

지난 Chapter 6에서는 리눅스가 다중 사용자 시스템이며, 각 사용자와 그룹을 어떻게 관리하는지 배웠습니다. 이제 이 사용자/그룹 개념을 바탕으로 리눅스 시스템의 핵심 보안 메커니즘인 **파일 권한(File Permissions)** 과 **소유권(Ownership)** 에 대해 자세히 알아볼 시간입니다.

리눅스에서는 모든 파일과 디렉토리에 대해 "누가(소유권)" 이 파일/디렉토리를 소유하고 있으며, "누가 무엇을 할 수 있는지(권한)"를 엄격하게 통제합니다. 마치 건물(파일 시스템)의 각 방(파일/디렉토리)마다 소유주가 있고, 출입증 등급(권한)에 따라 들어갈 수 있는 사람(읽기), 내부 물건을 옮기거나 바꿀 수 있는 사람(쓰기), 특정 장비를 사용할 수 있는 사람(실행)이 정해져 있는 것과 같습니다.

이러한 권한 및 소유권 관리는 여러 사용자가 함께 시스템을 사용하는 환경에서 보안을 유지하고 데이터를 보호하며, 협업을 원활하게 하는 데 필수적입니다.

이번 Chapter 7에서는 파일과 디렉토리에 부여되는 기본적인 권한(읽기, 쓰기, 실행)의 의미를 이해하고, `ls -l` 명령어를 통해 소유권과 권한을 확인하는 방법을 자세히 살펴봅니다. 또한, `chmod` 명령어를 사용하여 권한을 변경하는 두 가지 방법(심볼릭 모드, 숫자 모드)을 배우고, `chown`과 `chgrp` 명령어로 소유자나 그룹을 변경하는 방법을 익힙니다. 파일 생성 시 기본 권한을 결정하는 `umask` 개념과, 특별한 동작을 가능하게 하는 특수 권한(SetUID, SetGID, Sticky Bit)에 대해서도 소개합니다.


## 7.1 파일 접근 통제: 왜 권한이 필요할까요? (File Access Control: Why Are Permissions Needed?)

리눅스와 같은 다중 사용자 시스템에서 파일 권한이 왜 중요할까요?

1. **보안 (Security):** 허가되지 않은 사용자가 중요한 시스템 설정 파일(`/etc/passwd`, `/etc/shadow` 등)이나 다른 사용자의 개인적인 파일(예: `/home/alice` 안의 문서)을 읽거나 수정하는 것을 방지합니다.
2. **데이터 무결성 (Integrity):** 중요한 프로그램 파일(`/bin/ls` 등)이나 공유 데이터가 실수로 또는 악의적으로 변경되거나 삭제되는 것을 막아 시스템의 안정성을 유지합니다.
3. **협업 관리 (Collaboration):** 특정 프로젝트에 참여하는 사용자 그룹(`developers` 등)에게만 공유 디렉토리나 파일에 대한 읽기/쓰기 권한을 부여하고, 다른 사용자들의 접근은 제한하여 협업을 효율적이고 안전하게 관리할 수 있습니다.

리눅스의 모든 파일과 디렉토리에는 반드시 **소유자(Owner)** 와 **소유 그룹(Group)** 이 지정되어 있습니다. 그리고 이 파일/디렉토리에 대한 접근 권한은 다음 세 가지 범주에 대해 각각 정의됩니다.

* **사용자 (User/Owner):** 파일을 소유한 사용자.
* **그룹 (Group):** 파일의 소유 그룹에 속한 모든 사용자.
* **그 외 사용자 (Others):** 파일을 소유하지도 않았고, 소유 그룹에 속하지도 않은 나머지 모든 사용자.


## 7.2 권한 이해하기 (읽기-r, 쓰기-w, 실행-x) (Understanding Permissions: Read, Write, Execute)

각 파일/디렉토리에는 세 가지 기본적인 접근 권한 유형이 있습니다. 이 권한은 파일과 디렉토리에 따라 약간 다른 의미를 가집니다.

| 권한      | 기호 | 파일에 대한 의미                         | 디렉토리에 대한 의미                                                                 |
| :-------- | :--- | :--------------------------------------- | :----------------------------------------------------------------------------------- |
| **읽기** | `r`  | 파일의 내용을 읽을 수 있음 (`cat`, `less` 등) | 디렉토리 내 파일/하위 디렉토리 **목록을 볼 수 있음** (`ls`)                             |
| **쓰기** | `w`  | 파일의 내용을 변경하거나 삭제할 수 있음   | 디렉토리 내에서 파일/디렉토리를 **생성, 삭제, 이름 변경**할 수 있음 (매우 중요!)     |
| **실행** | `x`  | 파일을 프로그램으로서 실행할 수 있음    | 디렉토리 안으로 **진입(`cd`)**할 수 있고, 내부 항목에 접근할 수 있음 (경로 탐색에 필수) |

**특히 디렉토리에 대한 권한은 주의 깊게 이해해야 합니다.**

* 디렉토리에 `r` 권한만 있고 `x` 권한이 없으면 `ls` 로 목록은 볼 수 있지만 `cd` 로 들어갈 수는 없습니다.
* 디렉토리에 `x` 권한만 있고 `r` 권한이 없으면 `cd` 로 들어갈 수는 있지만, `ls` 로 내부 목록을 볼 수는 없습니다. (단, 파일 이름을 정확히 안다면 접근은 가능할 수 있습니다.)
* **디렉토리에 `w` 권한이 있으면, 그 안에 있는 파일 자체에 `w` 권한이 없더라도 해당 파일을 삭제하거나 이름을 바꿀 수 있습니다.** 디렉토리에 파일을 만들고 지우는 것은 디렉토리 자체에 대한 쓰기 권한이기 때문입니다.


## 7.3 권한 확인하기 (`ls -l` 출력 상세 분석) (Checking Permissions: Detailed Analysis of `ls -l` Output)

파일이나 디렉토리의 소유권과 권한을 확인하는 가장 일반적인 방법은 `ls -l` 명령어를 사용하는 것입니다. (Chapter 4에서 잠시 살펴봤었죠.)

```bash
ls -l
```

출력 예시:

```
-rw-r--r-- 1 alice staff  1024 Apr  8 10:30 report.txt
drwxr-xr-x 3 bob   devs   4096 Apr  7 15:00 project_x
lrwxrwxrwx 1 root  root     20 Apr  8 11:00 run_script -> /usr/local/bin/script.sh
```

여기서 **소유권과 권한 정보는 앞부분의 10개 문자와 그 뒤의 사용자/그룹 이름 필드**에 나타납니다.

**10자리 권한 문자열 분석 (`-rwxr-xr--` 또는 `drwxr-xr-x`):**

| 위치 | 의미             | 예시 (`-rw-r--r--`) | 예시 (`drwxr-xr-x`) | 설명                                                     |
| :--- | :--------------- | :------------------ | :------------------ | :------------------------------------------------------- |
| 1    | 파일 종류        | `-`                 | `d`                 | `-`: 일반 파일, `d`: 디렉토리, `l`: 심볼릭 링크 등       |
| 2-4  | **소유자(User)** | `rw-`               | `rwx`               | 소유자의 읽기(`r`), 쓰기(`w`), 실행(`x`) 권한. `-`는 없음 |
| 5-7  | **그룹(Group)** | `r--`               | `r-x`               | 소유 그룹 멤버의 읽기, 쓰기, 실행 권한                   |
| 8-10 | **기타(Others)** | `r--`               | `r-x`               | 그 외 모든 사용자의 읽기, 쓰기, 실행 권한                |

**다른 필드:**

* **숫자:** 하드 링크 개수
* **alice / bob / root:** 파일/디렉토리의 **소유자** 이름
* **staff / devs / root:** 파일/디렉토리의 **소유 그룹** 이름

**예시 해석:**

* `-rw-r--r--`: 일반 파일. 소유자는 읽기/쓰기 가능. 그룹 멤버는 읽기만 가능. 그 외 사용자도 읽기만 가능.
* `drwxr-xr-x`: 디렉토리. 소유자는 읽기/쓰기/실행 가능. 그룹 멤버는 읽기/실행 가능. 그 외 사용자도 읽기/실행 가능. (일반적인 디렉토리 권한)


## 7.4 권한 변경하기 (`chmod` - Change Mode)

파일이나 디렉토리의 접근 권한을 변경할 때는 `chmod` 명령어를 사용합니다. 이 명령을 사용하려면 해당 파일/디렉토리의 소유자이거나 루트(`sudo`) 권한이 있어야 합니다.

`chmod` 로 권한을 지정하는 방식에는 크게 **심볼릭 모드(Symbolic Mode)** 와 **숫자 모드(Octal Mode)** 두 가지가 있습니다.


### 7.4.1 심볼릭 모드 (Symbolic Mode: u, g, o, a 와 +, -, =)

문자 기호를 사용하여 권한을 변경하는 방식으로, 비교적 직관적이고 이해하기 쉽습니다.

* **형식:** `chmod <대상><연산자><권한> <파일/디렉토리>`
* **대상 (Who):**
  * `u`: 사용자 (User/Owner)
  * `g`: 그룹 (Group)
  * `o`: 그 외 사용자 (Others)
  * `a`: 모든 사용자 (All) - `u`, `g`, `o` 모두 해당 (생략 시 기본값)
* **연산자 (Operation):**
  * `+`: 권한 추가
  * `-`: 권한 제거
  * `=`: 지정된 권한으로 설정 (기존 권한 무시)
* **권한 (Permission):**
  * `r`: 읽기 권한
  * `w`: 쓰기 권한
  * `x`: 실행 권한

* **예시:**

    ```bash
    # script.sh 파일에 소유자의 실행 권한 추가
    chmod u+x script.sh

    # shared_data.txt 파일에 그룹의 쓰기 권한 추가
    chmod g+w shared_data.txt

    # private_info 파일에서 그 외 사용자의 읽기 권한 제거
    chmod o-r private_info

    # public_docs 디렉토리에 모든 사용자의 읽기 권한 추가
    chmod a+r public_docs/  # 또는 chmod +r public_docs/ (대상 생략 시 'a')

    # config.cfg 파일에 소유자와 그룹에게 읽기/쓰기 권한 추가 (동시 지정)
    chmod ug+rw config.cfg

    # archive 디렉토리의 권한을 그룹은 읽기/실행만, 그 외 사용자는 아무 권한 없음으로 설정
    chmod g=rx,o= archive/

    # project_files 디렉토리와 그 안의 모든 내용에 대해 그룹 쓰기 권한 재귀적으로 추가 (-R 옵션)
    chmod -R g+w project_files/
    ```


### 7.4.2 숫자 모드 (Octal/Numeric Mode: 4, 2, 1 조합)

세 자리 숫자를 사용하여 소유자, 그룹, 그 외 사용자의 권한을 한 번에 지정하는 방식입니다. 각 숫자는 읽기(4), 쓰기(2), 실행(1) 권한 값의 합으로 표현됩니다. 간결하지만 각 숫자의 의미를 알아야 합니다.

* **권한 값:**
  * `r` = 4
  * `w` = 2
  * `x` = 1
  * `-` = 0
* **숫자 계산:** 각 대상(소유자, 그룹, 기타)에 대해 부여할 권한 값들을 더합니다.
  * `rwx` = 4 + 2 + 1 = **7**
  * `rw-` = 4 + 2 + 0 = **6**
  * `r-x` = 4 + 0 + 1 = **5**
  * `r--` = 4 + 0 + 0 = **4**
  * `-wx` = 0 + 2 + 1 = **3**
  * `-w-` = 0 + 2 + 0 = **2**
  * `--x` = 0 + 0 + 1 = **1**
  * `---` = 0 + 0 + 0 = **0**
* **형식:** `chmod <숫자 3자리> <파일/디렉토리>`
  * 첫 번째 숫자: 소유자(User) 권한
  * 두 번째 숫자: 그룹(Group) 권한
  * 세 번째 숫자: 그 외 사용자(Others) 권한

* **예시:**

    ```bash
    # script.sh 권한을 rwxr-xr-x 로 변경 (소유자=rwx=7, 그룹=r-x=5, 기타=r-x=5)
    chmod 755 script.sh   # 실행 스크립트나 디렉토리에 흔히 사용

    # data.txt 권한을 rw-r--r-- 로 변경 (소유자=rw-=6, 그룹=r--=4, 기타=r--=4)
    chmod 644 data.txt    # 일반적인 읽기 전용 파일에 흔히 사용

    # private_dir 디렉토리 권한을 rwx------ 로 변경 (소유자=rwx=7, 그룹=---=0, 기타=---=0)
    chmod 700 private_dir # 소유자만 접근 가능한 디렉토리

    # private_key 파일 권한을 rw------- 로 변경 (소유자=rw-=6, 그룹=---=0, 기타=---=0)
    chmod 600 private_key # 개인 키 파일 등 민감한 파일에 사용

    # shared_docs 디렉토리와 그 안의 모든 내용 권한을 rw-rw-r-- 로 재귀적으로 변경 (-R 옵션)
    chmod -R 664 shared_docs/
    ```


### 7.4.3 디렉토리 권한의 의미 (복습 및 강조)

디렉토리에 대한 `r`, `w`, `x` 권한의 의미는 파일과는 다르다는 점을 다시 한번 기억하세요.

* **`r` (읽기):** 디렉토리 안에 어떤 파일과 서브디렉토리가 있는지 **목록(`ls`)** 을 볼 수 있습니다.
* **`w` (쓰기):** 디렉토리 안에서 파일을 **생성, 삭제, 이름 변경**할 수 있습니다. (이 디렉토리에 쓰기 권한이 있다면, 그 안의 파일에 대한 쓰기 권한이 없어도 파일을 삭제할 수 있습니다!)
* **`x` (실행):** 디렉토리 안으로 **진입(`cd`)**할 수 있습니다. 이 권한이 없으면 `ls` 로 목록을 보거나 내부 파일에 접근하는 것이 불가능합니다. 경로를 탐색하려면 경로상의 모든 디렉토리에 `x` 권한이 필요합니다.


## 7.5 소유자 및 그룹 변경하기 (`chown`, `chgrp` - Change Owner/Group)

파일이나 디렉토리의 소유자나 소유 그룹을 변경해야 할 때 사용하는 명령어입니다. 일반적으로 루트(`sudo`) 권한이 필요합니다. (단, 파일 소유자는 자신이 속한 다른 그룹으로 그룹 소유권을 변경하는 것은 가능할 수 있습니다.)


### 7.5.1 소유자 변경 (`chown` - Change Owner)

파일/디렉토리의 소유자 또는 소유자 및 그룹을 동시에 변경합니다.

* **형식:**
  * `sudo chown <새 소유자> <파일/디렉토리>` : 소유자만 변경
  * `sudo chown <새 소유자>:<새 그룹> <파일/디렉토리>` : 소유자와 그룹 동시 변경 (콜론 `:` 사용)
  * `sudo chown :<새 그룹> <파일/디렉토리>` : 그룹만 변경 (소유자 부분 비우고 콜론 사용 - `chgrp` 사용이 더 명확함)
* **`-R` (Recursive):** 디렉토리와 그 내용물 전체에 대해 재귀적으로 적용합니다.

* **예시:**

    ```bash
    # report.txt 파일의 소유자를 alice 로 변경
    sudo chown alice report.txt

    # project_file.c 파일의 소유자를 bob 으로, 그룹을 developers 로 변경
    sudo chown bob:developers project_file.c

    # 웹 서버 문서 루트 디렉토리(/var/www/html)와 그 안의 모든 내용의 소유자와 그룹을
    # www-data 로 재귀적으로 변경 (웹 서버 데몬이 접근할 수 있도록)
    sudo chown -R www-data:www-data /var/www/html
    ```


### 7.5.2 그룹 변경 (`chgrp` - Change Group)

파일/디렉토리의 소유 그룹만 변경합니다.

* **형식:** `sudo chgrp <새 그룹> <파일/디렉토리>`
* **`-R` (Recursive):** 재귀적으로 적용합니다.

* **예시:**

    ```bash
    # shared_document.odt 파일의 그룹을 staff 로 변경
    sudo chgrp staff shared_document.odt

    # assets 디렉토리와 그 안의 모든 내용의 그룹을 designers 로 재귀적으로 변경
    sudo chgrp -R designers assets/
    ```


## 7.6 기본 권한 설정 (`umask` - User Mask)

새로운 파일이나 디렉토리를 생성할 때 자동으로 부여되는 **기본 권한**은 어떻게 결정될까요? 바로 **`umask` (유저 마스크)** 값에 의해 결정됩니다. `umask`는 시스템의 기본 최대 권한에서 **"제거될" 권한**을 지정하는 값입니다.

* **최대 기본 권한:**
  * 파일: `666` (`rw-rw-rw-`) - 보안상 이유로 기본적으로 실행(`x`) 권한은 주어지지 않습니다.
  * 디렉토리: `777` (`rwxrwxrwx`)
* **`umask` 작동 방식:** `umask` 값은 8진수 숫자이며, 최대 기본 권한에서 `umask` 값을 뺀(정확히는 비트 연산이지만, 일반적인 값에서는 빼기로 이해해도 무방) 값이 최종 기본 권한이 됩니다.
* **일반적인 `umask` 값:**
  * **`022` (대부분 시스템의 기본값):**
    * 파일 기본 권한: `666` - `022` = `644` (`rw-r--r--`)
    * 디렉토리 기본 권한: `777` - `022` = `755` (`rwxr-xr-x`)
    * (소유자는 읽기/쓰기, 그룹과 기타 사용자는 읽기만 가능. 디렉토리는 실행도 가능)
  * **`002` (사용자별 개인 그룹 환경):**
    * 파일 기본 권한: `666` - `002` = `664` (`rw-rw-r--`)
    * 디렉토리 기본 권한: `777` - `002` = `775` (`rwxrwxr-x`)
    * (소유자와 그룹은 읽기/쓰기, 기타 사용자는 읽기만 가능. 그룹 협업에 유리)
* **`umask` 명령어:**
  * `umask`: 현재 설정된 `umask` 값을 8진수로 보여줍니다. (예: `0022`)
  * `umask -S`: 현재 `umask` 설정을 심볼릭 형태로 보여줍니다. (예: `u=rwx,g=rx,o=rx`)
  * `umask <새 8진수 값>`: **현재 쉘 세션**의 `umask` 값을 변경합니다. (영구적으로 변경하려면 `.bashrc` 등 쉘 설정 파일 수정 필요)

        ```bash
        umask 077 # 매우 제한적인 umask 설정 (파일: 600, 디렉토리: 700)
        ```

`umask` 값은 시스템 전체 설정 파일(`/etc/profile` 등)이나 사용자 개인 설정 파일(`~/.bashrc` 등)에서 지정되는 경우가 많습니다.


## 7.7 특수 권한 (SetUID, SetGID, Sticky Bit) - (개념 및 주의사항)

기본적인 `r`, `w`, `x` 권한 외에도 파일 시스템에는 특별한 동작을 제어하는 **특수 권한**들이 있습니다. 이 권한들은 시스템 운영에 필수적인 경우도 있지만, 잘못 사용하면 보안 위험을 초래할 수 있으므로 주의해서 이해하고 사용해야 합니다. `ls -l` 출력에서 실행 권한 자리에 `s` 또는 `t` 로 표시됩니다.

1. **SetUID (Set User ID):**
    * **실행 파일**에만 적용됩니다.
    * 이 권한이 설정된 파일을 **어떤 사용자가 실행하든, 그 프로세스는 파일의 소유자 권한으로 실행**됩니다.
    * 표시: `ls -l` 결과에서 소유자의 실행 권한 자리가 `x` 대신 `s` 로 표시됩니다 (`-rwsr-xr-x`). (소유자에게 원래 `x` 권한이 없었으면 대문자 `S` 로 표시)
    * 예시: `passwd` 명령어. 일반 사용자는 자신의 비밀번호 정보를 담은 `/etc/shadow` 파일을 수정할 권한이 없지만, `passwd` 명령어는 `root` 소유이고 SetUID가 설정되어 있어, 일반 사용자가 `passwd`를 실행하면 임시로 `root` 권한을 얻어 `/etc/shadow` 파일을 안전하게 수정할 수 있습니다.
    * **보안 위험:** `root` 소유의 SetUID 프로그램에 보안 취약점이 있다면, 공격자가 이를 이용하여 시스템의 `root` 권한을 탈취할 수 있습니다. 꼭 필요한 경우가 아니면 사용하지 않는 것이 좋습니다.
    * 설정: `chmod u+s <파일>` 또는 `chmod 4755 <파일>` (숫자 모드 첫 자리가 4)

2. **SetGID (Set Group ID):**
    * **실행 파일:** SetUID와 유사하게, 실행 시 **파일의 그룹 권한**으로 실행됩니다. 표시: 그룹 실행 권한 자리가 `s` (`-rwxr-sr-x`) 또는 `S`. 설정: `chmod g+s <파일>` 또는 `chmod 2755 <파일>` (숫자 모드 첫 자리가 2). 파일에는 SetUID보다 덜 흔하게 사용됩니다.
    * **디렉토리:** **디렉토리에 SetGID가 설정되면, 그 디렉토리 안에서 새로 생성되는 파일이나 하위 디렉토리는 생성한 사용자의 기본 그룹이 아닌, 해당 디렉토리의 그룹 소유권을 자동으로 상속받습니다.** 여러 사용자가 파일을 공유하는 프로젝트 디렉토리에서 매우 유용합니다. 새로 만드는 파일마다 `chgrp`를 할 필요가 없어집니다. 표시: 그룹 실행 권한 자리가 `s` (`drwxrwsr-x`) 또는 `S`. 설정: `chmod g+s <디렉토리>`.

3. **Sticky Bit:**
    * 주로 **디렉토리**에 적용됩니다.
    * 이 비트가 설정된 디렉토리(특히 모든 사용자가 쓰기 가능한 디렉토리, 예: `/tmp`) 안에서는, 사용자가 파일을 생성할 수는 있지만, **파일을 삭제하거나 이름을 변경하는 것은 해당 파일의 소유자 또는 디렉토리 소유자(및 root)만 가능**합니다. 즉, 다른 사람이 내가 만든 파일을 함부로 지울 수 없게 보호합니다.
    * 표시: 그 외 사용자(Others)의 실행 권한 자리가 `t` 로 표시됩니다 (`drwxrwxrwt`). (Others에게 원래 `x` 권한이 없었으면 대문자 `T` 로 표시)
    * 예시: `/tmp` 디렉토리의 권한은 보통 `1777` (`drwxrwxrwt`) 입니다.
    * 설정: `chmod +t <디렉토리>` 또는 `chmod 1777 <디렉토리>` (숫자 모드 첫 자리가 1)


## 결론

이번 챕터에서는 리눅스 파일 시스템의 핵심 보안 기능인 소유권과 권한에 대해 깊이 있게 알아보았습니다. 모든 파일과 디렉토리에는 소유자(User)와 그룹(Group)이 있으며, 이들에 대해 읽기(`r`), 쓰기(`w`), 실행(`x`) 권한이 어떻게 적용되는지, 그리고 이를 `ls -l` 로 어떻게 확인하는지 배웠습니다.

`chmod` 명령어를 통해 심볼릭 모드와 숫자 모드로 권한을 변경하는 방법, `chown`과 `chgrp` 명령어로 소유권을 변경하는 방법을 익혔습니다. 또한 `umask` 를 통해 파일/디렉토리 생성 시의 기본 권한이 어떻게 결정되는지 이해했으며, SetUID, SetGID, Sticky Bit와 같은 특수 권한의 개념과 주의사항에 대해서도 살펴보았습니다.

파일 권한과 소유권을 올바르게 이해하고 설정하는 것은 리눅스 시스템을 안전하게 보호하고, 여러 사용자와 효과적으로 협업하기 위한 필수적인 기술입니다.

다음 Chapter 8에서는 시스템에서 실행 중인 프로그램, 즉 프로세스(Process)를 어떻게 관리하고 제어하는지에 대해 배우게 됩니다.
