# Regular Expression

- 특정한 **규칙**을 가진 문자열의 집합을 **표현**



## 정규 표현식 만들기

1. 리터럴을 사용하여 패턴을 슬래시(/)로 감싸기
2. RegExp 생성자를 호출하여 생성하기

```javascript
const re = /ab/i
const re = new RegExp("ab")
```



## 정규 표현식 플래그

### i (ignore case)

- 정규 표현식은 기본적으로 대소문자를 구분한다.
- 이 플래그를 사용하면 대소문자를 구분하지 않는다.
- ex. `/abc/i`는  `ABC`에도 매칭이 된다.

```javascript
console.log("ABC".match(/abc/)) // null
console.log("ABC".match(/abc/i)) // ["ABC"]
```



### g (global search)

- 정규 표현식은 기본적으로 하나의 검색 결과만 반환한다.
- 이 플래그는 정규 표현식이 모든 검색 결과를 반환하도록 한다.

```javascript
const str = "abcABC"
console.log(str.match(/a/i)) // ["a"]
console.log(str.match(/a/gi)) // ["a","A"]
```



### m (multi line)

- 시작과 끝을 나타내는 앵커(^, &)가 전체 문자열의 시작과 끝이 아닌 줄의 시작과 끝에 일치됩니다.

```javascript
const str = "hello world\nhello regex";
console.log(str.match(/^hello/)); // ["hello"]
console.log(str.match(/^hello/gm)); // ["hello", "hello"]

```



### u (unicode)

- 확장된 유니코드 이스케이프를 지원. 
- 인식할 수 없는 이스케이프에 대해서 에러를 발생시킴



### y (sticky)

- 마지막 인덱스 위치에서만 일치하고 전역 플래그(g)를 무시



### s (dotall)

- 점(.)이 새 줄을 포함하여 모든 문자와 일치하게 됨



## 문자 클래스

| 패턴   | 의미                                          | 설명                                      | 동일                                                         |
| ------ | --------------------------------------------- | ----------------------------------------- | ------------------------------------------------------------ |
| [abc]  | abc중 어느 하나                               |                                           |                                                              |
| [^abc] | abc가 아닌 것                                 |                                           |                                                              |
| [a-g]  | a와 g 사이의 문자                             |                                           |                                                              |
| .      | 새 줄(\n \r \u2028 \u2029)을 제외한 모든 문자 | 'abcabcda'에서 /.a/ -> 'ab**ca**bc**da**' |                                                              |
| \w     | 영숫자 및 언더스코어.                         | 'ab_cd.com'에서 \w -> '**ab_cd**$**com**' | `[A-Za-z0-9_]`                                               |
| \W     | /w가 아닌 것.                                 | 'ab_cd.com'에서 \w -> 'ab_cd**$**com'     | ` [^A-Za-z0-9_]`                                             |
| \d     | 숫자.                                         | 'apple1234'에서 \d -> 'apple**1234**'     | `[0-9]`                                                      |
| \D     | 숫자가 아닌 것.                               | 'apple1234'에서 \d -> '**apple**1234'     | `[^0-9]`                                                     |
| \s     | whitespace                                    | 'one man'에서 \s -> 'one■man'             | `[\f\n\r\t\v\u0020\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]` |
| \S     | whitespace가 아닌 것                          | 'one man'에서 \S -> '**one**□**man**'     | `[^\f\n\r\t\v\u0020\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]` |
| \t     | 수평 탭(horizontal tab)                       | Tab 키                                    |                                                              |
| \v     | 수직 탭(vertical tab)                         |                                           |                                                              |
| \r     | 캐리지 리턴(carriage return)                  | 새 줄을 시작하는 데 사용되는 제어 문자    |                                                              |
| \n     | 라인 피드(linefeed)                           | 커서를 다음 줄로 옮기는 것                |                                                              |
| \f     | 폼 피드(form-feed)                            | 새 문서 페이지임을 표시하는 것            |                                                              |
| \0     | NUL 문자                                      | 뒤에 숫자가 이어지면 안                   |                                                              |
| x\|y   | 논리 합                                       | "x" 또는 "y"                              |                                                              |



## 어서션

- 단어 또는 라인의 시작과 끝을 나타내는 경계를 포함
- 매치가 가능함을 나타내는 몇 가지 패턴을 포함

### Boundary-type assertions

| 문자 | 의미                                                         |
| ---- | ------------------------------------------------------------ |
| ^    | 입력의 시작과 일치. 멀티 라인이 설정된 경우, 줄 바꿈 바로 뒤에도 일치 |
| $    | 입력의 마지막과 일치. 멀티 라인이 설정된 경우, 줄 바꿈 바로 이전에도 일치 |
| \b   | 단어 경계와 일치. 뒤에 다른 단어가 오지 않거나, 앞에 다른 단어가 오지 않는 위치 |
| \B   | 단어가 아닌 경계와 일치.  이전 문자와 다음 문자가 같은 유형인 위치 |

### other assertions

| 문자    | 의미                                                         |
| ------- | ------------------------------------------------------------ |
| x(?=y)  | **Lookahead**: "x" 뒤에 "y"가 오는 경우에만 "x"에 일치       |
| x(?!y)  | **Negative lookahead**: "x" 뒤에 'y'가 오지 않는 경우에만 "x"에 일치 |
| (?<=y)x | **Lookbehind**: "x" 앞에 "y"가 오는 경우에만 "x"에 일치      |
| (?<!y)x | **Negative lookbehind**: "x" 앞에 "y"가 오지 않는 경우에만 "x"에 일치 |



## 그룹

- 글부 캡처링: 여러 패턴을 묶어 그룹화하고 하위 문자열을 기억
- 역참조: 동일한 정규식에서 이전에 캡쳐된 그룹을 참조하는 것
- 그룹 캡처링은 성능을 저하시키므로 필요한 경우에만 사용

| 문자         | 의미                                                         |
| ------------ | ------------------------------------------------------------ |
| `(x)`        | **Capturing group**: x에 일치하고 일치한 것을 기억           |
| `(?<Name>x)` | **Named capturing group**: 일치한 것을 `<Name>`에 기억       |
| `(?:*x*)`    | **Non-capturing group**: "x"에 일치하지만, 일치 항목을 기억하지는 않는다. |
| `\n`         | 역참조 (n은 양의 정수). 정규식의 n번째 괄호와 매칭하는 하위 문자열에 대한 역참조 |
| `\k<Name>`   | **Named capture group**에 대한 역참조                        |



## 수량자

- 문자나 표현식의 일치 개수를 표현

| 문자                                                  | 의미                                                         |
| ----------------------------------------------------- | ------------------------------------------------------------ |
| x*                                                    | "x"를 0회 이상 일치                                          |
| x+                                                    | "x"를 1회 이상 일치                                          |
| x?                                                    | "x"를 0회 또는 1회 일치                                      |
| x{n}                                                  | "x"의 "n"회 발생과 일치 (n은 양의 정수)                      |
| x{n,}                                                 | "x"의 "n"회 이상 발생과 일치 (n은 양의 정수)                 |
| x{n,m}                                                | "x"의 "n"회 이상  "m"회 이하 발생과 일치 (n,m은 양의 정수, 0 ≤ n < m) |
| x**?` `*x*+?` `*x*??` `*x*{n}?` `*x*{n,}?` `*x*{n,m}? | 기본적으로 수량자는 "greedy" -> 가능한 많은 문자열과 일치시키려 함 <br />수량자 뒤에 `?`를 지정하여 "lazy"로 만듦 -> 일치하는 것을 찾으면 바로 멈춤 |





## 예제

### 숫자만으로 이루어져 있는지

- 숫자로 시작하여(`^\d`) 반복하고(+) 마지막에 도달($)

```javascript
/^\d+$/
```

### 영문, 숫자, .으로 이루어져 있는지

```javascript
/^[A-za-z0-9.]+$/
```

### 아이디 검사

- 4 글자 이상 12글자 이하의 영문 숫자 포함

```javascript
/^[A-Za-z0-9]{4,12}$/
```

### 전화번호 검사

- 유선 전화번호: 지역 번호(2,3) + 국번(3) + 전화번호(4)

```javascript
/^\d{2,3}-\d{3,4}-\d{4}$/
```

- 무선 전화번호: 통신사 식별번호(3,4) + 전화 번호(8)

```javascript
/^\d{3,4}-\d{3,4}-\d{4}$/
```

### 이메일 검사

```javascript
/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/
```

### 우편번호 검사

- 5자리 숫자

```javascript
/^\d{5}$/
```

### URL 검사

- 전체 URL 또는 프로토콜을 생략한 URL

```javascript
/^(https?:\/\/)?([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})(:[0-9]+)?(\/.*)?$/
```

### 날짜 검사

- YYYY-MM-DD 형식 날짜 데이터 검사

```javascript
/^(?:[0-9]{4})-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12][0-9]|3[01])$/
```

### 시간 검사

- hh:mm 형식 시간 데이터 검사

```javascript
/^(?:[01]\d|2[0-3]):[0-5]\d$/
```

### 특정 확장자를 가진 파일의 이름 추출

- 특정 확장자를 가진 파일 이름에서 확장자를 제외한 이름만 추출
- fewfw.twe.txt.txt.txt -> **fewfw.twe.txt.txt**.txt

```
^.+(?=.txt)
```

### 파일 이름에서 이름과 확장자를 따로 추출

- abc.txt -> ["abc","txt"]

```javascript
^(.+)\.(\w+)$
```

### IPv4 검사

```javascript
/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/
```

